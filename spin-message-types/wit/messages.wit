default world messages {
record metadata {
    name: string,
    value: list<u8>
}

record message {
    body: option<list<u8>>,
    metadata: list<metadata>
}

record subject-message {
    message: message,
    subject: option<string>,
    broker: option<string>
}

variant outcome {
    publish(list<subject-message>),
    error(string)
}

export handle-message: func(message: subject-message) -> outcome
}